<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.proComment.mapper.OsPropertyCommentMapper">

    <resultMap id="proResultMap"
               type="com.example.demo.proComment.entity.OsPropertyComment">

        <result column="property_id" property="propertyId"/>
    </resultMap>


    <select id="getCommentIdTen" resultType="int" parameterType="string">

        SELECT
            DISTINCT pc.property_id propertyId
        FROM
            os_property_comment pc
        WHERE
            pc.area_id IN
        <foreach collection="areaList" index="index" item="item" open="(" separator="," close=")">
            #{item}
        </foreach>
          And pc.comstr IS NOT NULL
          AND trim( pc.comstr )!= ''
        ORDER BY
            pc.create_time
            LIMIT 10

    </select>
    
    <select id="getCommentByProId" resultType="com.example.demo.proComment.dto.OsPropertyCommentDto">

        SELECT
            pc.comstr comstr,
            property_id propertyId,
            pr.`name` propertyName,
            pc.point point,
            pc.create_time createtime
        FROM
            os_property_comment pc
                INNER JOIN os_property pr ON pc.property_id = pr.id
        WHERE
            property_id = #{propertyId}
          AND pc.comstr IS NOT NULL
          AND trim( pc.comstr )!= ''
	        LIMIT 3;

    </select>
</mapper>
